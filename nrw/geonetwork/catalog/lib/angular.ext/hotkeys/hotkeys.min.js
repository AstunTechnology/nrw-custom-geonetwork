/*!
 * angular-hotkeys v1.4.5
 * https://chieffancypants.github.io/angular-hotkeys
 * Copyright (c) 2014 Wes Cruver
 * License: MIT
 */
!function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",(function(){this.includeCheatSheet=!0,this.templateTitle="Keyboard Shortcuts:",this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><table role="presentation"><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">x</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(e,t,n,o,i){function r(e){var t={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"↩",backspace:"⌫"};e=e.split("+");for(var n=0;n<e.length;n++)"mod"===e[n]&&(o.navigator&&o.navigator.platform.indexOf("Mac")>=0?e[n]="command":e[n]="ctrl"),e[n]=t[e[n]]||e[n];return e.join(" + ")}function a(e,t,n,o,i,r){this.combo=e instanceof Array?e:[e],this.description=t,this.callback=n,this.action=o,this.allowIn=i,this.persistent=r}Mousetrap.stopCallback=function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&(t.contentEditable&&"true"==t.contentEditable)},a.prototype.format=function(){for(var e=this.combo[0].split(/[\s]/),t=0;t<e.length;t++)e[t]=r(e[t]);return e};var s=t.$new();s.hotkeys=[],s.helpVisible=!1,s.title=this.templateTitle,s.toggleCheatSheet=d;var c=[];if(t.$on("$routeChangeSuccess",(function(e,t){f(),t&&t.hotkeys&&angular.forEach(t.hotkeys,(function(e){var n=e[2];("string"==typeof n||n instanceof String)&&(e[2]=[n,t]),e[5]=!1,y.apply(this,e)}))})),this.includeCheatSheet){var l=i[0],h=e[0],u=angular.element(this.template);y(this.cheatSheetHotkey,this.cheatSheetDescription,d),h!==l&&h!==l.documentElement||(h=l.body),angular.element(h).append(n(u)(s))}function f(){for(var e=s.hotkeys.length;e--;){var t=s.hotkeys[e];t&&!t.persistent&&k(t)}}var p=!1;function d(){s.helpVisible=!s.helpVisible,s.helpVisible?(p=m("esc"),k("esc"),y("esc",p.description,d)):(k("esc"),!1!==p&&y(p))}function y(e,t,n,o,i,r){var c,l=["INPUT","SELECT","TEXTAREA"];if("[object Object]"===Object.prototype.toString.call(e)&&(t=e.description,n=e.callback,o=e.action,r=e.persistent,i=e.allowIn,e=e.combo),t instanceof Function?(o=n,n=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),void 0===r&&(r=!0),"function"==typeof n){var h;c=n,i instanceof Array||(i=[]);for(var u=0;u<i.length;u++)i[u]=i[u].toUpperCase(),-1!==(h=l.indexOf(i[u]))&&l.splice(h,1);n=function(e){var t=!0,n=e.target||e.srcElement,o=n.nodeName.toUpperCase();if((" "+n.className+" ").indexOf(" mousetrap ")>-1)t=!0;else for(var i=0;i<l.length;i++)if(l[i]===o){t=!1;break}t&&v(c.apply(this,arguments))}}"string"==typeof o?Mousetrap.bind(e,v(n),o):Mousetrap.bind(e,v(n));var f=new a(e,t,n,o,i,r);return s.hotkeys.push(f),f}function k(e){var t=e instanceof a?e.combo:e;if(Mousetrap.unbind(t),angular.isArray(t)){for(var n=!0,o=t.length;o--;)n=k(t[o])&&n;return n}var i=s.hotkeys.indexOf(m(t));return i>-1&&(s.hotkeys[i].combo.length>1?s.hotkeys[i].combo.splice(s.hotkeys[i].combo.indexOf(t),1):s.hotkeys.splice(i,1),!0)}function m(e){for(var t,n=0;n<s.hotkeys.length;n++)if((t=s.hotkeys[n]).combo.indexOf(e)>-1)return t;return!1}function v(e){return function(n,o){if(e instanceof Array){var i=e[0],r=e[1];e=function(e){r.scope.$eval(i)}}t.$apply((function(){e(n,m(o))}))}}var g={add:y,del:k,get:m,bindTo:function(e){return e.$id in c||(c[e.$id]=[],e.$on("$destroy",(function(){for(var t=c[e.$id].length;t--;)k(c[e.$id][t]),delete c[e.$id][t]}))),{add:function(t){var n;return n=arguments.length>1?y.apply(this,arguments):y(t),c[e.$id].push(n),this}}},template:this.template,toggleCheatSheet:d,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,purgeHotkeys:f,templateTitle:this.templateTitle};return g}]})).directive("hotkey",["hotkeys",function(e){return{restrict:"A",link:function(t,n,o){var i,r;angular.forEach(t.$eval(o.hotkey),(function(t,n){r="string"==typeof o.hotkeyAllowIn?o.hotkeyAllowIn.split(/[\s,]+/):[],i=n,e.add({combo:n,description:o.hotkeyDescription,callback:t,action:o.hotkeyAction,allowIn:r})})),n.bind("$destroy",(function(){e.del(i)}))}}}]).run(["hotkeys",function(e){}])}(),function(e,t,n){for(var o,i,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},a={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},c={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l={},h={},u={},f=!1,p=!1,d=!1,y=1;y<20;++y)r[111+y]="f"+y;for(y=0;y<=9;++y)r[y+96]=y;function k(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return r[e.which]?r[e.which]:a[e.which]?a[e.which]:String.fromCharCode(e.which).toLowerCase()}function v(e){e=e||{};var t,n=!1;for(t in u)e[t]?n=!0:u[t]=0;n||(d=!1)}function g(e,t,n,o,i,r){var a,s,c,h,f=[],p=n.type;if(!l[e])return[];for("keyup"==p&&w(e)&&(t=[e]),a=0;a<l[e].length;++a)if(s=l[e][a],(o||!s.seq||u[s.seq]==s.level)&&p==s.action&&("keypress"==p&&!n.metaKey&&!n.ctrlKey||(c=t,h=s.modifiers,c.sort().join(",")===h.sort().join(",")))){var d=!o&&s.combo==i,y=o&&s.seq==o&&s.level==r;(d||y)&&l[e].splice(a,1),f.push(s)}return f}function b(e,t,n,o){A.stopCallback(t,t.target||t.srcElement,n,o)||!1===e(t,n)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function $(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=m(e);t&&("keyup"!=e.type||f!==t?A.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):f=!1)}function w(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function S(e,t,n){return n||(n=function(){if(!o)for(var e in o={},r)e>95&&e<112||r.hasOwnProperty(e)&&(o[r[e]]=e);return o}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function C(e,t,n,o){function r(t){return function(){d=t,++u[e],clearTimeout(i),i=setTimeout(v,1e3)}}function a(t){b(n,t,e),"keyup"!==o&&(f=m(t)),setTimeout(v,10)}u[e]=0;for(var s=0;s<t.length;++s){var c=s+1===t.length?a:r(o||E(t[s+1]).action);T(t[s],c,o,e,s)}}function E(e,t){var n,o,i,r=[];for(n=function(e){return"+"===e?["+"]:e.split("+")}(e),i=0;i<n.length;++i)o=n[i],c[o]&&(o=c[o]),t&&"keypress"!=t&&s[o]&&(o=s[o],r.push("shift")),w(o)&&r.push(o);return{key:o,modifiers:r,action:t=S(o,r,t)}}function T(e,t,n,o,i){h[e+":"+n]=t;var r,a=(e=e.replace(/\s+/g," ")).split(" ");a.length>1?C(e,a,t,n):(r=E(e,n),l[r.key]=l[r.key]||[],g(r.key,r.modifiers,{type:r.action},o,e,i),l[r.key][o?"unshift":"push"]({callback:t,modifiers:r.modifiers,action:r.action,seq:o,level:i,combo:e}))}k(t,"keypress",$),k(t,"keydown",$),k(t,"keyup",$);var A={bind:function(e,t,n){return function(e,t,n){for(var o=0;o<e.length;++o)T(e[o],t,n)}(e=e instanceof Array?e:[e],t,n),this},unbind:function(e,t){return A.bind(e,(function(){}),t)},trigger:function(e,t){return h[e+":"+t]&&h[e+":"+t]({},e),this},reset:function(){return l={},h={},this},stopCallback:function(e,t){return!((" "+t.className+" ").indexOf(" mousetrap ")>-1)&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},handleKey:function(e,t,n){var o,i=g(e,t,n),r={},a=0,s=!1;for(o=0;o<i.length;++o)i[o].seq&&(a=Math.max(a,i[o].level));for(o=0;o<i.length;++o)if(i[o].seq){if(i[o].level!=a)continue;s=!0,r[i[o].seq]=1,b(i[o].callback,n,i[o].combo,i[o].seq)}else s||b(i[o].callback,n,i[o].combo);var c="keypress"==n.type&&p;n.type!=d||w(e)||c||v(r),p=s&&"keydown"==n.type}};e.Mousetrap=A,"function"==typeof define&&define.amd&&define(A)}(window,document);